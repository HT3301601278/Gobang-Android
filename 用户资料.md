# 用户资料

## RESTful API 接口

### 1. 获取当前用户资料

- **请求方式**: GET
- **接口地址**: `/user/profile`
- **请求头**:
  ```
  Authorization: Bearer {token}
  ```
- **响应**:
  ```json
  {
    "success": true,
    "user": {
      "userId": "用户ID",
      "username": "用户名",
      "email": "电子邮箱",
      "nickname": "用户昵称",
      "avatar": {
        "type": "头像类型(default/custom/system)",
        "url": "头像URL"
      },
      "stats": {
        "totalGames": "总对局数",
        "wins": "获胜局数",
        "losses": "失败局数",
        "draws": "平局数"
      }
    }
  }
  ```

### 2. 更新用户资料

- **请求方式**: PUT
- **接口地址**: `/user/profile`
- **请求头**:
  ```
  Authorization: Bearer {token}
  Content-Type: application/json
  ```
- **请求体**:
  ```json
  {
    "nickname": "新昵称",
    "avatar": {
      "type": "头像类型",
      "url": "头像URL"
    }
  }
  ```
- **响应**:
  ```json
  {
    "success": true,
    "user": {
      "userId": "用户ID",
      "username": "用户名",
      "email": "电子邮箱",
      "nickname": "用户昵称",
      "avatar": {
        "type": "头像类型",
        "url": "头像URL"
      },
      "stats": {
        "totalGames": "总对局数",
        "wins": "获胜局数",
        "losses": "失败局数",
        "draws": "平局数"
      }
    }
  }
  ```

### 3. 获取其他用户公开资料

- **请求方式**: GET
- **接口地址**: `/user/profile/{userId}`
- **请求头**:
  ```
  Authorization: Bearer {token}
  ```
- **响应**:
  ```json
  {
    "success": true,
    "user": {
      "userId": "用户ID",
      "nickname": "用户昵称",
      "avatar": {
        "type": "头像类型",
        "url": "头像URL"
      },
      "stats": {
        "totalGames": "总对局数",
        "wins": "获胜局数",
        "losses": "失败局数",
        "draws": "平局数"
      },
      "online": true/false
    }
  }
  ```

### 4. 上传自定义头像

- **请求方式**: POST
- **接口地址**: `/user/avatar/upload`
- **请求头**:
  ```
  Authorization: Bearer {token}
  Content-Type: multipart/form-data
  ```
- **请求体**:
  ```
  avatar: [文件]
  ```
- **响应**:
  ```json
  {
    "success": true,
    "avatarUrl": "头像URL路径"
  }
  ```

### 5. 获取系统头像库

- **请求方式**: GET
- **接口地址**: `/user/avatar/system`
- **响应**:
  ```json
  {
    "success": true,
    "avatars": [
      {
        "id": "头像ID",
        "url": "头像URL",
        "name": "头像名称"
      }
    ]
  }
  ```

### 6. 获取系统表情包

- **请求方式**: GET
- **接口地址**: `/user/emoji/system`
- **响应**:
  ```json
  {
    "success": true,
    "emojis": [
      {
        "id": "表情ID",
        "url": "表情URL",
        "name": "表情名称"
      }
    ]
  }
  ```

### 7. 获取用户详细统计

- **请求方式**: GET
- **接口地址**: `/user/stats`
- **请求头**:
  ```
  Authorization: Bearer {token}
  ```
- **响应**:
  ```json
  {
    "success": true,
    "stats": {
      "totalGames": "总对局数",
      "wins": "获胜局数",
      "losses": "失败局数",
      "draws": "平局数",
      "winRate": "胜率百分比",
      "recentGames": []
    }
  }
  ```

### 8. 获取系统快捷短语

- **请求方式**: GET
- **接口地址**: `/user/quick-phrases/system`
- **响应**:
  ```json
  {
    "success": true,
    "phrases": [
      {
        "id": "短语ID",
        "content": "短语内容"
      }
    ]
  }
  ```

### 9. 获取用户自定义快捷短语

- **请求方式**: GET
- **接口地址**: `/user/quick-phrases`
- **请求头**:
  ```
  Authorization: Bearer {token}
  ```
- **响应**:
  ```json
  {
    "success": true,
    "phrases": [
      {
        "id": "短语ID",
        "content": "短语内容",
        "createdAt": "创建时间"
      }
    ]
  }
  ```

### 10. 添加自定义快捷短语

- **请求方式**: POST
- **接口地址**: `/user/quick-phrases`
- **请求头**:
  ```
  Authorization: Bearer {token}
  Content-Type: application/json
  ```
- **请求体**:
  ```json
  {
    "content": "短语内容"
  }
  ```
- **响应**:
  ```json
  {
    "success": true,
    "phrase": {
      "id": "短语ID",
      "content": "短语内容",
      "createdAt": "创建时间"
    },
    "message": "快捷短语添加成功"
  }
  ```

### 11. 删除自定义快捷短语

- **请求方式**: DELETE
- **接口地址**: `/user/quick-phrases/{phraseId}`
- **请求头**:
  ```
  Authorization: Bearer {token}
  ```
- **响应**:
  ```json
  {
    "success": true,
    "message": "快捷短语删除成功"
  }
  ```

### 12. 更新自定义快捷短语

- **请求方式**: PUT
- **接口地址**: `/user/quick-phrases/{phraseId}`
- **请求头**:
  ```
  Authorization: Bearer {token}
  Content-Type: application/json
  ```
- **请求体**:
  ```json
  {
    "content": "新的短语内容"
  }
  ```
- **响应**:
  ```json
  {
    "success": true,
    "message": "快捷短语更新成功"
  }
  ```
